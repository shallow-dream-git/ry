<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ruoyi.system.mapper.SysFeeMapper">
    
    <resultMap type="SysFee" id="SysFeeResult">
        <result property="roomId"    column="room_id"    />
        <result property="roomDept"    column="room_dept"    />
        <result property="roomNumber"    column="room_number"    />
        <result property="roomFee"    column="room_fee"    />
    </resultMap>

    <sql id="selectSysFeeVo">
        select room_id, room_dept, room_number, room_fee from sys_fee
    </sql>

    <select id="selectSysFeeList" parameterType="SysFee" resultMap="SysFeeResult">
        <include refid="selectSysFeeVo"/>
        <where>  
            <if test="roomDept != null  and roomDept != ''"> and room_dept = #{roomDept}</if>
            <if test="roomNumber != null "> and room_number = #{roomNumber}</if>
            <if test="roomFee != null "> and room_fee = #{roomFee}</if>
        </where>
    </select>
    
    <select id="selectSysFeeByRoomId" parameterType="Long" resultMap="SysFeeResult">
        <include refid="selectSysFeeVo"/>
        where room_id = #{roomId}
    </select>
        
    <insert id="insertSysFee" parameterType="SysFee">
        insert into sys_fee
        <trim prefix="(" suffix=")" suffixOverrides=",">
            <if test="roomId != null">room_id,</if>
            <if test="roomDept != null">room_dept,</if>
            <if test="roomNumber != null">room_number,</if>
            <if test="roomFee != null">room_fee,</if>
         </trim>
        <trim prefix="values (" suffix=")" suffixOverrides=",">
            <if test="roomId != null">#{roomId},</if>
            <if test="roomDept != null">#{roomDept},</if>
            <if test="roomNumber != null">#{roomNumber},</if>
            <if test="roomFee != null">#{roomFee},</if>
         </trim>
    </insert>

    <update id="updateSysFee" parameterType="SysFee">
        update sys_fee
        <trim prefix="SET" suffixOverrides=",">
            <if test="roomDept != null">room_dept = #{roomDept},</if>
            <if test="roomNumber != null">room_number = #{roomNumber},</if>
            <if test="roomFee != null">room_fee = room_fee + #{roomFee},</if>
        </trim>
        where room_id = #{roomId}
    </update>

    <delete id="deleteSysFeeByRoomId" parameterType="Long">
        delete from sys_fee where room_id = #{roomId}
    </delete>

    <delete id="deleteSysFeeByRoomIds" parameterType="String">
        delete from sys_fee where room_id in 
        <foreach item="roomId" collection="array" open="(" separator="," close=")">
            #{roomId}
        </foreach>
    </delete>
</mapper>